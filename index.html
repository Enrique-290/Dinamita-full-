
<!doctype html>
<html lang="es">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>DIN√ÅMITA POS ‚Äî Cat√°logo</title>
<style>
  :root{--red:#e11d2a;--black:#111;--muted:#6b7280;}
  body{margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif;background:#fff;color:#111;}
  header{display:flex;gap:12px;align-items:center;padding:14px 18px;border-bottom:1px solid #eee;position:sticky;top:0;background:#fff;z-index:2}
  .brand{display:flex;align-items:center;gap:10px}
  .badge{font-size:12px;color:#b91c1c;line-height:1.1}
  h1{margin:18px;font-size:28px}
  table{width:100%;border-collapse:collapse}
  th,td{padding:12px 16px;border-bottom:1px solid #eee;font-size:15px}
  th{text-align:left;color:#374151;background:#fafafa;position:sticky;top:66px;z-index:1}
  .btn{
    background:var(--red);color:#fff;border:0;border-radius:10px;padding:10px 14px;
    font-weight:600;cursor:pointer
  }
  .btn:disabled{opacity:.6;cursor:not-allowed}
  .add{background:#111}
  .page{max-width:980px;margin:0 auto;padding-bottom:120px}
  .cartBar{
    position:fixed;left:0;right:0;bottom:0;background:#fff;border-top:1px solid #eee;
    display:flex;gap:14px;align-items:center;justify-content:space-between;
    padding:12px 14px;z-index:5
  }
  .cartList{position:fixed;left:10px;right:10px;bottom:78px;background:#fff;border:1px solid #eee;border-radius:10px;
    box-shadow:0 6px 24px rgba(0,0,0,.08);max-height:45vh;overflow:auto;padding:10px;display:none}
  .cartItem{
    display:grid;grid-template-columns:1fr auto auto auto;gap:10px;align-items:center;
    padding:8px 6px;border-bottom:1px dashed #eee;font-size:14px
  }
  .qtyCtl button{width:28px;height:28px;border-radius:8px;border:1px solid #ddd;background:#fafafa;cursor:pointer}
  .del{background:#fff;border:1px solid #eee;border-radius:8px;padding:6px 10px;cursor:pointer}
  .pill{padding:2px 8px;border-radius:999px;background:#f3f4f6;color:#111;font-size:12px}
  .muted{color:#6b7280}
  .ticket{
    position:fixed;inset:0;background:rgba(0,0,0,.55);display:none;align-items:center;justify-content:center;padding:16px;
  }
  .ticket .card{background:#fff;border-radius:14px;max-width:520px;width:100%;padding:18px;box-shadow:0 10px 30px rgba(0,0,0,.25)}
  .ticket h3{margin:0 0 6px 0}
  .ticket table{width:100%}
  .ticket td, .ticket th{font-size:14px;border-bottom:1px solid #f0f0f0;padding:8px}
  .right{text-align:right}
  .logoDot{width:26px;height:26px;border-radius:6px;background:#111;display:grid;place-items:center;color:#ffbf00;font-weight:900}
  .tip{margin:8px 18px 0 18px;color:#6b7280;font-size:13px}
  .enter{margin-left:auto;display:flex;gap:8px}
  input[type=email]{
    border:1px solid #e5e7eb;border-radius:10px;padding:10px 12px;font-size:14px;width:220px
  }
  .toggle{color:#374151;font-size:14px;cursor:pointer;text-decoration:underline}
</style>
</head>
<body>
<header>
  <div class="brand">
    <div class="logoDot">‚òÖ</div>
    <div>
      <div style="font-weight:800;letter-spacing:.2px">DIN√ÅMITA <span style="color:var(--red)">POS</span></div>
      <div class="badge">Modo Seguro (sin impresora)</div>
    </div>
  </div>
  <div class="enter">
    <input type="email" placeholder="tu correo" id="mail">
    <button class="btn">Entrar</button>
  </div>
</header>

<div class="page">
  <h1>Cat√°logo</h1>
  <div class="tip">Tip: toca <b>‚Äú+‚Äù</b> en el carrito para aumentar cantidad; <b>‚Äú‚Äì‚Äù</b> para disminuir; üóëÔ∏è basurero para quitar.</div>
  <table id="tbl">
    <thead>
      <tr><th>SKU</th><th>Producto</th><th>$</th><th>Stock</th><th></th></tr>
    </thead>
    <tbody></tbody>
  </table>
</div>

<div class="cartList" id="cartList"></div>
<div class="cartBar">
  <div>
    <span class="toggle" id="toggleCart">Mostrar carrito</span>
  </div>
  <div>
    <select id="pay">
      <option>Efectivo</option>
      <option>Tarjeta</option>
      <option>Transferencia</option>
    </select>
    <span style="margin:0 12px;font-weight:800" id="total">$0.00</span>
    <button class="btn" id="checkout">Finalizar venta</button>
  </div>
</div>

<div class="ticket" id="ticket">
  <div class="card">
    <div style="display:flex;align-items:center;gap:10px;margin-bottom:10px">
      <div class="logoDot">‚òÖ</div>
      <div><h3 style="margin:0">DIN√ÅMITA GYM ‚Äî Ticket</h3><div class="muted" id="tDate"></div></div>
    </div>
    <table id="tTable"><thead><tr><th>Tipo</th><th>Concepto</th><th class="right">$</th></tr></thead><tbody></tbody></table>
    <div style="display:flex;justify-content:space-between;margin-top:10px">
      <div class="muted">Gracias por tu compra üí•</div>
      <div style="font-weight:800" id="tTotal"></div>
    </div>
    <div style="display:flex;justify-content:flex-end;gap:8px;margin-top:12px">
      <button class="del" id="closeTicket">Cerrar</button>
    </div>
  </div>
</div>

<script>
const seed = [{"sku": "758104001972", "name": "Agua Bonafont 1L", "price": 14, "stock": 20, "category": "Agua"}, {"sku": "758104000159", "name": "Agua Bonafont 2L", "price": 20, "stock": 20, "category": "Agua"}, {"sku": "758104005796", "name": "Agua Bonafont 1.5L", "price": 16, "stock": 20, "category": "Agua"}, {"sku": "0237433", "name": "Gatorade 1L", "price": 26, "stock": 20, "category": "Hidratante"}, {"sku": "037617310649", "name": "Gatorade 600ml", "price": 20, "stock": 20, "category": "Hidratante"}, {"sku": "7503027753", "name": "Volt Blue", "price": 22, "stock": 20, "category": "Energ√©tica"}, {"sku": "7503027753Y", "name": "Volt Yellow", "price": 22, "stock": 20, "category": "Energ√©tica"}, {"sku": "7503027753P", "name": "Volt Pink", "price": 22, "stock": 20, "category": "Energ√©tica"}, {"sku": "ELECTROLIT", "name": "Electrolit", "price": 25, "stock": 20, "category": "Hidratante"}, {"sku": "TPW", "name": "T Prote√≠na Whey", "price": 25, "stock": 20, "category": "Suplemento"}, {"sku": "TPM", "name": "T Prote√≠na Mass", "price": 35, "stock": 20, "category": "Suplemento"}, {"sku": "OX", "name": "√ìxido", "price": 25, "stock": 20, "category": "Suplemento"}];
let items = seed.map(p=>Object.assign({}, p));

const tbody = document.querySelector("#tbl tbody");
const cartList = document.getElementById("cartList");
const totalEl = document.getElementById("total");
const ticket = document.getElementById("ticket");
const tTableBody = ticket.querySelector("tbody");
const tDate = document.getElementById("tDate");
const tTotal = document.getElementById("tTotal");

const cart = new Map(); // sku -> {sku,name,price,qty}

function format(n){return `$${n.toFixed(2)}`}

function renderRows(){
  tbody.innerHTML = "";
  items.forEach(p=>{
    const tr = document.createElement("tr");
    tr.innerHTML = `
      <td>${p.sku}</td>
      <td>${p.name}</td>
      <td>${format(p.price)}</td>
      <td>${p.stock}</td>
      <td><button class="btn add" data-sku="${p.sku}">Agregar</button></td>
    `;
    tbody.appendChild(tr);
  });
}

function updateCartUI(){
  let total = 0;
  cartList.innerHTML = "";
  cart.forEach(it=>{
    const line = it.price * it.qty;
    total += line;
    const row = document.createElement("div");
    row.className = "cartItem";
    row.innerHTML = `
      <div><span class="pill">${it.qty}√ó</span> ${it.name}</div>
      <div class="qtyCtl">
        <button data-act="dec" data-sku="${it.sku}">‚Äì</button>
        <button data-act="inc" data-sku="${it.sku}">+</button>
      </div>
      <div class="right">${format(line)}</div>
      <button class="del" data-act="del" data-sku="${it.sku}">üóëÔ∏è</button>
    `;
    cartList.appendChild(row);
  });
  totalEl.textContent = format(total);
}

tbody.addEventListener("click", e=>{
  const btn = e.target.closest("button.add");
  if(!btn) return;
  const sku = btn.dataset.sku;
  const p = items.find(x=>x.sku===sku);
  if(!p) return;
  const cur = cart.get(sku) || {sku,name:p.name,price:p.price,qty:0};
  cur.qty += 1;
  cart.set(sku, cur);
  updateCartUI();
  showCart(true);
});

cartList.addEventListener("click", e=>{
  const target = e.target.closest("button");
  if(!target) return;
  const sku = target.dataset.sku;
  const it = cart.get(sku);
  if(!it) return;
  const act = target.dataset.act;
  if(act==="inc"){ it.qty += 1; }
  else if(act==="dec"){ it.qty = Math.max(0, it.qty-1); if(it.qty===0) cart.delete(sku); }
  else if(act==="del"){ cart.delete(sku); }
  updateCartUI();
});

function showCart(open){
  cartList.style.display = open? "block":"none";
  document.getElementById("toggleCart").textContent = open? "Ocultar carrito":"Mostrar carrito";
}
document.getElementById("toggleCart").onclick = ()=>{
  const open = cartList.style.display !== "block";
  showCart(open);
};

document.getElementById("checkout").onclick = ()=>{
  // build ticket
  tDate.textContent = new Date().toLocaleString();
  tTableBody.innerHTML = "";
  let total = 0;
  cart.forEach(it=>{
    const line = it.price * it.qty;
    total += line;
    const tr = document.createElement("tr");
    tr.innerHTML = `<td>producto</td><td>${it.name} <span class="muted">(${it.qty}√ó)</span></td><td class="right">${format(line)}</td>`;
    tTableBody.appendChild(tr);
  });
  tTotal.textContent = format(total);
  ticket.style.display = "flex";
  // clear cart so it no se queda "atorado"
  cart.clear();
  updateCartUI();
  showCart(false);
};

document.getElementById("closeTicket").onclick = ()=>{
  ticket.style.display = "none";
};

renderRows();
updateCartUI();
</script>
</body>
</html>
